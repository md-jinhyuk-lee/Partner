# 💰 파트너 정산 관리 시스템 (업로드 버전)

**간단한 파일 업로드 방식으로 정산 자동 계산!**

## 🚀 빠른 시작

### 1. Streamlit Cloud에 배포

1. [Streamlit Cloud](https://streamlit.io/cloud) 가입 (무료)
2. GitHub 저장소에 파일 업로드:
   - `app_upload.py` (메인 앱 파일)
   - `requirements_upload.txt` (이름을 `requirements.txt`로 변경)
3. Streamlit Cloud에서 "New app" 클릭
4. Repository 선택 후 Deploy!
5. 완료! 🎉

### 2. 로컬에서 실행

```bash
# 패키지 설치
pip install streamlit pandas openpyxl

# 앱 실행
streamlit run app_upload.py
```

## 📝 사용 방법

### 1단계: CSV 파일 준비

#### 📋 단가관리.csv
```csv
품목명,단가,카테고리
비닐봉투(소),50,부자재
비닐봉투(대),100,부자재
박스(소),500,부자재
택배,3000,택배
행낭,1500,행낭
```

#### 📋 매장관리.csv
```csv
매장명,매장코드
강남점,GN01
서초점,SC01
역삼점,YS01
```

#### 📋 사용내역.csv
```csv
날짜,매장코드,품목명,수량
2024-11-01,GN01,비닐봉투(소),50
2024-11-01,GN01,택배,10
2024-11-02,SC01,비닐봉투(대),30
```

### 2단계: 파일 업로드

1. 웹사이트 접속
2. 패스워드 입력: `dy1234`
3. 3개 CSV 파일 업로드:
   - 💰 단가관리
   - 🏪 매장관리
   - 📊 사용내역

### 3단계: 자동 정산!

- 매장별 정산 금액 자동 계산
- 상세 내역 확인
- CSV 파일 다운로드

## ✨ 주요 기능

✅ **파일 업로드만 하면 끝** - 복잡한 설정 불필요
✅ **자동 정산 계산** - 매장별, 품목별 자동 집계
✅ **결과 다운로드** - CSV로 정산 결과 저장
✅ **실시간 미리보기** - 업로드한 데이터 즉시 확인
✅ **샘플 파일 제공** - 다운로드하여 바로 사용

## ⚠️ 주의사항

### CSV 파일 형식

1. **인코딩**: UTF-8로 저장
   - Excel: "CSV UTF-8"로 저장
   - 메모장: 저장 시 인코딩 UTF-8 선택

2. **구분자**: 쉼표(,) 사용

3. **매칭 규칙**:
   - 사용내역의 "매장코드"가 매장관리에 있어야 함
   - 사용내역의 "품목명"이 단가관리에 있어야 함
   - 띄어쓰기, 괄호까지 정확히 일치해야 계산됨!

### 예시

❌ 잘못된 예:
- 단가관리: `비닐봉투(소)`
- 사용내역: `비닐봉투 소` → **계산 안됨!**

✅ 올바른 예:
- 단가관리: `비닐봉투(소)`
- 사용내역: `비닐봉투(소)` → **계산됨!**

## 🔐 보안

- 기본 패스워드: `dy1234`
- 코드에서 변경 가능 (app_upload.py 11번째 줄)
- 업로드한 파일은 서버에 저장되지 않음 (세션 메모리에만 존재)

## 💡 팁

### Excel에서 CSV 만들기

1. Excel에서 데이터 입력
2. "다른 이름으로 저장"
3. 파일 형식: **"CSV UTF-8 (쉼표로 분리)"** 선택
4. 저장!

### 한글 깨짐 방지

- 반드시 **UTF-8** 인코딩으로 저장
- Excel 2016 이상: "CSV UTF-8" 옵션 사용
- 메모장: 저장 시 인코딩 선택에서 UTF-8 선택

## 🆘 문제 해결

### 파일 업로드 후 오류 발생

**원인**: CSV 형식 문제
**해결**: 
1. 샘플 파일 다운로드
2. 샘플 파일 형식에 맞게 데이터 입력
3. UTF-8로 저장

### 품목이 계산되지 않음

**원인**: 품목명 불일치
**해결**:
1. 단가관리의 품목명 확인
2. 사용내역의 품목명과 정확히 일치하는지 확인
3. 띄어쓰기, 괄호까지 동일하게!

### 매장 정산이 나오지 않음

**원인**: 매장코드 불일치
**해결**:
1. 매장관리의 매장코드 확인
2. 사용내역의 매장코드와 일치하는지 확인

## 📧 문의

문제가 있으시면 GitHub Issues에 등록해주세요!

---

**구글 시트 연동 없이 간단하게!** 🎉
